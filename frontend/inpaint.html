<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>SD 1.5 Inpainting</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="app">
        <header class="header">
            <h1>Synthia Engine</h1>
            <nav class="header-nav">
                <a class="secondary nav-link" href="index.html">Text2Img</a>
                <a class="secondary nav-link" href="img2img.html">Img2Img</a>
            </nav>
        </header>

        <div class="layout">
            <section class="controls">
                <label class="field">
                    <span>Prompt</span>
                    <textarea id="prompt" placeholder="Enter prompt..."></textarea>
                </label>

                <label class="field">
                    <span>Negative Prompt</span>
                    <textarea id="negative_prompt" class="textarea-small" placeholder="Optional negative prompt..."></textarea>
                </label>

                <label class="field">
                    <span>Image</span>
                    <input id="image" type="file" accept="image/*" />
                </label>

                <div class="field">
                    <span>Mask</span>
                    <div class="canvas-wrap">
                        <canvas id="mask-canvas" width="512" height="512"></canvas>
                    </div>
                    <small class="hint">Paint white over areas to inpaint.</small>
                </div>

                <div class="field-row">
                    <label class="field">
                        <span>Brush Size</span>
                        <input id="brush_size" type="number" value="32" min="4" max="128" step="1" />
                    </label>
                    <button class="secondary" type="button" onclick="clearMask()">Clear Mask</button>
                </div>

                <button id="export_mask" class="secondary" type="button" onclick="downloadMask()" disabled>Export Mask PNG</button>

                <label class="field">
                    <span>Strength</span>
                    <input id="strength" type="number" value="0.7" step="0.05" min="0" max="1" />
                </label>

                <div class="field-row">
                    <label class="field">
                        <span>Seed</span>
                        <input id="seed" type="number" value="0" step="1" />
                    </label>
                    <label class="field">
                        <span>Steps</span>
                        <input id="steps" type="number" value="20" step="1" />
                    </label>
                </div>

                <div class="field-row">
                    <label class="field">
                        <span>CFG</span>
                        <input id="cfg" type="number" step="0.5" value="7.5" />
                    </label>
                    <label class="field">
                        <span>Scheduler</span>
                        <select id="scheduler">
                            <option value="euler">Euler</option>
                            <option value="euler_a">Euler a</option>
                            <option value="dpmpp_2m">DPM++ 2M</option>
                            <option value="dpmpp_2m_karras">DPM++ 2M Karras</option>
                            <option value="ddim">DDIM</option>
                        </select>
                    </label>
                </div>

                <div class="field-row">
                    <label class="field">
                        <span>Width</span>
                        <input id="width" type="number" value="512" step="8" min="64" />
                    </label>
                    <label class="field">
                        <span>Height</span>
                        <input id="height" type="number" value="512" step="8" min="64" />
                    </label>
                </div>

                <label class="field">
                    <span>Images</span>
                    <input id="num_images" type="number" value="1" min="1" max="8" />
                </label>

                <button class="primary" onclick="generateInpaint()">Generate</button>
            </section>

            <section class="gallery-panel">
                <div class="gallery-header">
                    <h2>Gallery</h2>
                    <p>Outputs appear here as they render.</p>
                </div>
                <div class="viewer">
                    <div class="viewer-frame">
                        <div id="viewer-empty" class="viewer-empty">No images yet</div>
                        <img id="viewer-image" alt="Generated output" />
                    </div>
                    <div class="viewer-controls">
                        <button id="viewer-prev" class="secondary" type="button">Prev</button>
                        <span id="viewer-count">0 / 0</span>
                        <button id="viewer-next" class="secondary" type="button">Next</button>
                    </div>
                    <div id="viewer-thumbs" class="viewer-thumbs"></div>
                </div>
            </section>
        </div>
    </div>

    <script src="gallery.js?v=1"></script>
    <script src="inpaint.js?v=1"></script>
</body>

</html>
